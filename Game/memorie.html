<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Kartenspiel</title>
    <style>
        body {
            display: flex; /* Flexbox f√ºr das Layout */
            flex-direction: column; /* Vertikale Anordnung */
            align-items: center; /* Zentriere den Inhalt */
        }
        .rules {
            width: 600px; /* Breite f√ºr die Regeln */
            margin-top: 20px; /* Abstand zum Kartenfeld */
            font-size: 1em; /* Schriftgr√∂√üe f√ºr die Regeln */
            text-align: center; /* Text zentriert */
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr); /* 5 Spalten */
            grid-gap: 10px;
            width: 500px;
            margin: auto;
        }
.message-container {
    display: flex;
    flex-direction: column; /* Vertikale Anordnung der Nachrichten */
    align-items: center; /* Zentriere die Nachrichten horizontal */
    justify-content: center; /* Zentriere die Nachrichten vertikal */
    height: 300px; /* H√∂he des Containers f√ºr Nachrichten */
    width: 400%; /* Volle Breite */
    max-width: 600px; /* Maximalbreite f√ºr den Container */
    margin: 0 auto; /* Zentriert den Container */
    text-align: center; /* Zentriert den Text innerhalb des Containers */
}

.message {
    font-size: 50px;
    font-weight: bold;
}

.sub-message {
    font-size: 30px;
    margin-top: 20px; /* Abstand zur Hauptmeldung */
    font-weight: bold;
}



        .card {
            background: lightgray;
            width: 80px;
            height: 80px;
            text-align: center;
            line-height: 80px;
            cursor: pointer;
            font-size: 2.5em; /* Schriftgr√∂√üe reduziert */
            user-select: none;
            transition: background-color 0.3s ease;
        }

        .card::before {
            content: attr(data-name);
            color: black;
        }

        .card.cover::before {
            content: "?";
            color: transparent;
        }

        #lives {
            text-align: center;
            font-size: 2em; /* Schriftgr√∂√üe reduziert */
            margin: 20px;
        }

        button {
            display: block;
            margin: 20px auto;
            padding: 10px 20px;
            font-size: 1.2em;
        }
    </style>
</head>
<body>

<!-- Hintergrundmusik -->
<audio id="backgroundMusic" autoplay loop>
    <source src="99pro Media Memorie.mp3" type="audio/mpeg">
    Dein Browser unterst√ºtzt keine Audio-Wiedergabe.
</audio>

<div class="header">
    <img src="images/Memorie_Logo.png" alt="Memorie Logo" style="max-width: 200px; height: auto;">

</div>

<div id="lives"></div>
<button id="startButton" onclick="startGame()">Start</button>

<div class="grid" id="game"></div>

<div class="rules" id="rules">
    <h3>Grundregeln</h3>
    <p>1. Versuche dir die Positionen der Paare zu merken.</p>
    <p>2. Decke nacheinander zwei Karten auf.</p>
    <p>3. Deckst du nicht zwei gleiche Karten auf, so verlierst du ein Herz.</p>
    <p>4. Hast du alle 10 Herzen verloren, verlierst du das Spiel.</p>
    <p>5. Hast du drei richtige Paare hintereinander aufgedeckt, bekommst du ein Herz zur√ºck.</p>
    <p>6. Hast du alle Paare aufgedeckt, Herzlichen Gl√ºckwunsch, du hast gewonnen.</p>
</div>

<script>
// Funktion zum √úberpr√ºfen des Bildpfads
    function checkImagePath() {
        const imgElement = document.querySelector('img'); // W√§hle das Bild-Element
        console.log("Der Pfad zum Bild ist:", imgElement.src); // Gib den Pfad in der Konsole aus
    }

    // F√ºhre die Funktion nach dem Laden der Seite aus
    window.onload = checkImagePath;
	
let music = document.getElementById('backgroundMusic'); // Musik-Element
music.volume = 0.3; // Setze die Lautst√§rke auf 20% (kann angepasst werden)

let richtigPaareZ√§hler = 0;
let cardArray = [
  'üòÄ', 'üòÄ', 'üòá', 'üòá', 'üòé', 'üòé', 'üòç', 'üòç', 'üòò', 'üòò',
  'ü•∞', 'ü•∞', 'üòÇ', 'üòÇ', 'ü§£', 'ü§£', 'üòä', 'üòä', 'üòâ', 'üòâ'
];

let count = 0;
let firstCard, secondCard;
let wait = false;
let lives = 10;
let gameStarted = false;

function shuffle(array) {
  let currentIndex = array.length, temporaryValue, randomIndex;

  while (0 !== currentIndex) {
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;

    temporaryValue = array[currentIndex];
    array[currentIndex] = array[randomIndex];
    array[randomIndex] = temporaryValue;
  }

  return array;
}

function flipCard() {
  if (!gameStarted || wait || this.classList.contains('flipped')) return;

  this.classList.remove('cover');
  this.classList.add('flipped');

  if (count === 0) {
    firstCard = this;
    count++;
  } else if (count === 1) {
    secondCard = this;
    count++;

    // Set wait to true to prevent further clicks
    wait = true;

    if (firstCard.dataset.name === secondCard.dataset.name) {
      // Beide Karten leuchten gr√ºn bei √úbereinstimmung
      firstCard.style.backgroundColor = 'lightgreen';
      secondCard.style.backgroundColor = 'lightgreen';
      setTimeout(() => {
        firstCard.style.visibility = 'hidden';
        secondCard.style.visibility = 'hidden';
        resetTurn();
        richtigPaareZ√§hler++; // erh√∂he richtigPaareZ√§hler
        if (richtigPaareZ√§hler % 3 === 0) { // Pr√ºfe, ob richtigPaareZ√§hler ein Vielfaches von 3 ist
          gewinneHerz();
        }
        checkWin();
        wait = false; // Setze wait zur√ºck nach dem √úberpr√ºfen
      }, 900);
    } else {
      // Beide Karten leuchten rot bei Nicht√ºbereinstimmung
      firstCard.style.backgroundColor = 'lightcoral';
      secondCard.style.backgroundColor = 'lightcoral';
      setTimeout(() => {
        firstCard.classList.add('cover');
        firstCard.classList.remove('flipped');
        secondCard.classList.add('cover');
        secondCard.classList.remove('flipped');
        firstCard.style.backgroundColor = 'lightgray';
        secondCard.style.backgroundColor = 'lightgray';
        resetTurn();
        richtigPaareZ√§hler = 0;
        loseLife(); // Leben verlieren, wenn die √úbereinstimmung falsch ist
        wait = false; // Setze wait zur√ºck nach dem Verstecken
      }, 1000);
    }
  }
}

function loseLife() {
    lives--;
    updateLives();

    if (lives === 0) {
        let gameOverMessage = 
          '<div class="message-container">' + 
          '<div class="message">Game Over</div>' +
          '<div class="sub-message">Und jetzt zur√ºck an die Arbeit!</div>' +
          '</div>';
        game.innerHTML = gameOverMessage;
        gameStarted = false;
        document.getElementById('startButton').style.display = 'none'; // Verstecke den Start-Button
    }
}


function gewinneHerz() {
  lives++;
  updateLives();
}

function resetTurn() {
  firstCard = null;
  secondCard = null;
  count = 0;
}

function updateLives() {
  document.getElementById('lives').innerHTML = '‚ù§Ô∏è '.repeat(lives);
}

function createBoard(grid, element) {
    for (let i = 0; i < grid.length; i++) {
        let card = document.createElement('div');
        card.classList.add('card');
        card.dataset.name = grid[i];
        card.addEventListener('click', flipCard);
        element.appendChild(card);
    }
}

function startGame() {
  gameStarted = true;
  let cards = document.querySelectorAll('.card');
  cards.forEach(card => card.classList.add('cover')); // Flip all cards
  document.getElementById('startButton').style.display = 'none'; // versteckt den Startknopf
  document.getElementById('rules').style.display = 'none'; // Verstecke die Regeln
	music.play(); // Musik startet, wenn das Spiel startet
}

function checkWin() {
    let cards = document.querySelectorAll('.card');
    let win = true;

    cards.forEach(card => {
        if (card.style.visibility !== 'hidden') {
            win = false;
        }
    });

    if (win) {
        gameStarted = false;
        let winMessage = 
          '<div class="message-container">' + 
          '<div class="message">WOW GEWONNEN</div>' +
          '<div class="sub-message">Jetzt aber zur√ºck an die Arbeit!</div>' +
          '</div>';
        game.innerHTML = winMessage;
        document.getElementById('startButton').style.display = 'none'; // Verstecke den Start-Button
    }
}


function restartGame() {
  game.innerHTML = ''; // Clear the board
  lives = 10; // Reset lives
  gameStarted = false; // Reset game start
  updateLives(); // Update the lives display
  gameGrid = shuffle(cardArray); // Shuffle cards
  createBoard(gameGrid, grid); // Create a new board
}

let game = document.getElementById('game');
let grid = document.createElement('section');
grid.setAttribute('class', 'grid');
game.appendChild(grid);

let gameGrid = shuffle(cardArray);
createBoard(gameGrid, grid);
updateLives();

</script>

</body>
</html>
